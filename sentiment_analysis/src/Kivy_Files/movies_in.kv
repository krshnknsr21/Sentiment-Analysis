#:import utils kivy.utils
#utils.get_color_from_hex('')
<Movies_in@RelativeLayout>:
    dropdown: dropdown.__self__
    id: movie_screen
    canvas.before:
        Color:
            rgb: (160/255,160/255,160/255,1)
        BorderImage:
            source: 'Images/blue.png'
            pos: self.pos
            size: self.size

    ShadowLabel:
        id: review_legend_pos
        text: ''
        decal: 2, -2
        tint: .5, .5, 1, .5
        pos_hint:{"center_x": .65, 'center_y': .70}
        font_size: 20
        halign: 'center'
        color: 0,1,0,1

    ShadowLabel:
        id: review_legend_neg
        text: ''
        decal: 2, -2
        tint: .5, .5, 1, .5
        pos_hint:{"center_x": .65, 'center_y': .55}
        font_size: 20
        halign: 'center'
        color: 1,0,0,1

    ShadowLabel:
        id: review_legend_neu
        text: ''
        decal: 2, -2
        tint: .5, .5, 1, .5
        pos_hint:{"center_x": .65, 'center_y': .40}
        font_size: 20
        halign: 'center'
        color: 0.5,0.5,0.5,1

    ShadowLabel:
        id: movies_in_label
        text: 'Final Verdict'
        decal: 2, -2
        tint: 0, 0, 0, 0
        pos_hint:{"center_x": .5, 'center_y': .15}
        size_hint: .5, .1
        font_size: 30
        color: 1,1,1,1
        bold: True

    CustomLabel:
        id: pie_chart_pos
        foreground_color: (0,0,0,0)
        canvas:
            Color:
                rgb: utils.get_color_from_hex('74E654')
            Ellipse:
                id: ellipsee
                pos: 100, 160
                size: 200, 200
                angle_start: self.start_value
                angle_end: self.end_value

    CustomLabel:
        id: pie_chart_neg
        pos_hint: {"center_x": .5, 'center_y': .5}
        foreground_color: (0,0,0,0)
        canvas:
            Color:
                rgb: utils.get_color_from_hex('D63030')
            Ellipse:
                id: ellipsee
                pos: 100, 160
                size: 200, 200
                angle_start: self.start_value
                angle_end: self.end_value

    CustomLabel:
        id: pie_chart_nu
        foreground_color: (0,0,0,0)
        canvas:
            Color:
                rgb: (0.5, 0.5, 0.5, 1)
            Ellipse:
                id: ellipsee
                pos: 100, 160
                size: 200, 200
                angle_start: self.start_value
                angle_end: self.end_value

    #To add border to the pie chart
    # CustomLabel:
    #     id: pie_chart_border
    #     #text: '50'
    #     foreground_color: (0,0,0,0)
    #     canvas.before:
    #         Color:
    #             rgb: (0, 0, 0, 1)
    #         Ellipse:
    #             id: ellipsee
    #             pos: 100, 160
    #             size: 210, 210
    #             angle_start: 0
    #             angle_end: 360

    Custom_menu_button:
        id: select_movie
        text: 'Select Movie'
        on_parent: dropdown.dismiss()
        on_release: dropdown.open(select_movie)
        size_hint: .8, .1
        pos_hint:  {"center_x": .5, "center_y": .9}

    DropDown:
        id: dropdown
        on_select: select_movie.text = '{}'.format(args[1])

        Custom_menu_button:
            text: 'Joker'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Joker')
            on_press: app.process_movies_in('Joker')

        Custom_menu_button:
            text: 'The Shawshank Redemption'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('The Shawshank Redemption')
            on_press: app.process_movies_in('The Shawshank Redemption')

        Custom_menu_button:
            text: 'The Dark Knight'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('The Dark Knight')
            on_press: app.process_movies_in('The Dark Knight')

        Custom_menu_button:
            text: 'Avengers Endgame'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Avengers Endgame')
            on_press: app.process_movies_in('Avengers Endgame')

        Custom_menu_button:
            text: 'Avengers Infinity War'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Avengers Infinity War')
            on_press: app.process_movies_in('Avengers Infinity War')

        Custom_menu_button:
            text: 'Tenet'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Tenet')
            on_press: app.process_movies_in('Tenet')

        Custom_menu_button:
            text: 'Parasite'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Parasite')
            on_press: app.process_movies_in('Parasite')

        Custom_menu_button:
            text: 'Inception'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Inception')
            on_press: app.process_movies_in('Inception')

        Custom_menu_button:
            text: 'The Lord of the Rings: The Return of the King'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('The Lord of the Rings: The Return of the King')
            on_press: app.process_movies_in('The Lord of the Rings: The Return of the King')

        Custom_menu_button:
            text: 'Spider-Man: Far from Home'
            size_hint_y: None
            size_hint_x: select_movie.size_hint_x
            height: '50dp'
            on_release: dropdown.select('Spider-Man: Far from Home')
            on_press: app.process_movies_in('Spider-Man: Far from Home')

<CustomLabel>:
#This defines the labels for drawing the pie chart

<Custom_menu_button@MDRectangleFlatButton>:
    md_bg_color: utils.get_color_from_hex('51c4d3')
    md_fg_color: 0,0,0,1
    text_color: 1,1,1,1
    font_size: 20

<ShadowLabel>:
    canvas.before:
        Color:
            rgba: root.tint

        Rectangle:
            pos:
                int(self.center_x - self.texture_size[0] / 2.) + root.decal[0],\
                int(self.center_y - self.texture_size[1] / 2.) + root.decal[1]

            size: root.texture_size
            texture: root.texture
